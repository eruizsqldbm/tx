- id: f0b6697a-7eb4-4925-9f72-ec5eb6318733
  value: |2-

      name: stage

      physicalName: 'stg_${parentPhysicalName}'

      logicalName: 'stage ${parentLogicalName}'

      color: 'orange'                                             # Color of object on diagram (string, green | blue | red | SqlDBM  colors, optional)

      inheritIdentifiersAs: pk                                    # Inherit primary key columns from parent table(s) as PK or non-PK attributes (string, pk | non-pk | none, default non-pk)
      inheritAttributes: true                                     # Inherit non-pk columns from parent table(s) (boolean, default true)

      defaultColumns:
      - name: '__load_date'
        logicalName: 'load date'
        dataType: date
        comment: 'load date'
        nullable: false
        unique: false
        default: 'current_date()'
        position: last
        logic: current_date()

      nodeSettings:
      - groupName: 'System UI Items'
        groupDesc: 'System UI Items'
        isEnabled: true

        items:
        - itemType: materialization
          default: 'table'
          options:
          - 'table'
          - 'view'
          isRequired: true
          isEnabled: true

        - itemType: toggleButton
          itemDesc: Truncate before
          itemName: truncateBefore
          default: false
          isRequired: false
          isEnabled: true

        - itemType: prePostSql
          itemDesc: Pre Create SQL
          itemName: preCreate
          default: ''                                                 # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

        - itemType: prePostSql
          itemDesc: Post Create SQL
          itemName: postCreate
          default: ''                                                 # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

        - itemType: prePostSql
          itemDesc: Pre Run SQL
          itemName: preRun
          default: ''                                                 # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

        - itemType: prePostSql
          itemDesc: Post Run SQL
          itemName: postRun
          default: ''                                                 # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

      - groupName: 'Column settings'
        groupDesc: 'Column settings'
        isEnabled: true

        items:
        - itemType: columnSet
          itemName: PK
          itemDesc: 'Primary key'
          isRequired: false
          isEnabled: true

        - itemType: columnSet
          itemName: AK
          itemDesc: 'Alternate key'
          isRequired: false
          isEnabled: true

      - groupName: 'User UI Items'
        groupDesc: 'Optional user configured items'
        isEnabled: true

        items:
        - itemType: toggleButton
          itemDesc: 'Rely on constraints'
          itemName: rely_button
          default: true
          isEnabled: true
  name: stage
  color: '#FC7917'
  createScript: >
    {%- if materialization == 'table' %}

    CREATE OR REPLACE TABLE {{ location.databaseName }}.{{ location.schemaName
    }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}" {{ col.dataType }}
            {%- if not col.allowNulls %} NOT NULL
                {%- if col.defaultValue | length > 0 %} DEFAULT {{ col.defaultValue }}{% endif %}
            {%- endif %}
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor -%}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'PK' -%}
            , CONSTRAINT  {{ colSet.setName }} PRIMARY KEY (
                {%- for pkCol in colSet.columns -%}
                    "{{pkCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'AK' -%}
            , CONSTRAINT  {{ colSet.setName }} UNIQUE (
                {%- for akCol in colSet.columns -%}
                    "{{akCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
    )

    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    ;


    {%- elif materialization == 'view' %}

    CREATE OR REPLACE VIEW {{ location.mapping }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}"
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor %}
    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    )

    AS

    {{logic}}

    ;

    {%- endif %}
  runScript: |
    {% if materialization == 'table' %}
    INSERT INTO {{ location.mapping }}.{{name}}
    (
        {%- for col in columns %}
        "{{ col.name }}"
        {%- if not loop.last %}, {% endif %}
        {%- endfor %}
    )
    {{ logic }};
    {%- endif %}
  isDefault: true
- id: 2168e0c1-186b-4952-ae36-9b93af4f4a35
  value: |2-

      name: Persistent Stage

      physicalName: 'stg_${parentPhysicalName}'

      logicalName: 'stage ${parentLogicalName}'

      color: 'orange'                                             # Color of object on diagram (string, green | blue | red | SqlDBM  colors, optional)
      
      inheritIdentifiersAs: pk                                    # Inherit primary key columns from parent table(s) as PK or non-PK attributes (string, pk | non-pk | none, default non-pk)
      inheritAttributes: true                                     # Inherit non-pk columns from parent table(s) (boolean, default true)
      
      defaultColumns:
      - name: '__load_date'
        logicalName: 'load date'
        dataType: date
        comment: 'load date'
        nullable: false
        unique: false
        default: 'current_date()'
        position: last
        logic: current_date()

      nodeSettings:
      - groupName: 'System UI Items'
        groupDesc: 'System UI Items'
        isEnabled: true

        items:
        - itemType: materialization
          default: 'table'
          options:
          - 'table'
          - 'view'
          isRequired: true
          isEnabled: true
        
        - itemType: toggleButton
          itemDesc: Truncate before
          itemName: truncateBefore
          default: false
          isRequired: false
          isEnabled: true
      
        - itemType: prePostSql
          itemDesc: Pre Create SQL
          itemName: preCreate
          default: ''                                              # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false
        
        - itemType: prePostSql
          itemDesc: Post Create SQL
          itemName: postCreate
          default: ''                                              # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

        - itemType: prePostSql
          itemDesc: Pre Run SQL
          itemName: preRun
          default: ''                                              # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

        - itemType: prePostSql
          itemDesc: Post Run SQL
          itemName: postRun
          default: ''                                              # Some default SQL text (string, optional)
          isRequired: false
          isEnabled: true
          isValidated: false

      - groupName: 'Column settings'
        groupDesc: 'Column settings'
        isEnabled: true

        items:
        - itemType: columnSet
          itemName: PK
          itemDesc: 'Primary key'
          isRequired: false
          isEnabled: true
        
        - itemType: columnSet
          itemName: AK
          itemDesc: 'Alternate key'
          isRequired: false
          isEnabled: true

      - groupName: 'User UI Items'
        groupDesc: 'Optional user configured items'
        isEnabled: true

        items:
        - itemType: toggleButton
          itemDesc: 'Rely on constraints'
          itemName: rely_button
          default: true
          isEnabled: true
  name: persistent stage
  color: '#FC7917'
  createScript: >
    {%- if materialization == 'table' %}

    CREATE OR REPLACE TABLE {{ location.databaseName }}.{{ location.schemaName
    }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}" {{ col.dataType }}
            {%- if not col.allowNulls %} NOT NULL
                {%- if col.defaultValue | length > 0 %} DEFAULT {{ col.defaultValue }}{% endif %}
            {%- endif %}
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor -%}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'PK' -%}
            , CONSTRAINT  {{ colSet.setName }} PRIMARY KEY (
                {%- for pkCol in colSet.columns -%}
                    "{{pkCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'AK' -%}
            , CONSTRAINT  {{ colSet.setName }} UNIQUE (
                {%- for akCol in colSet.columns -%}
                    "{{akCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
    )

    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    ;


    {%- elif materialization == 'view' %}

    CREATE OR REPLACE VIEW {{ location.mapping }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}"
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor %}
    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    )

    AS

    {{logic}}

    ;

    {%- endif %}
  runScript: |
    {%- if materialization == 'table' %}
    MERGE INTO {{ location.mapping }}.{{ name }} AS TxObject
    USING (
        {{ logic }}
    ) AS TxLogic
    ON
        {%- for colSet in columnSets %}
            {%- if colSet.itemName == 'PK' -%}
                {%- for pkCol in colSet.columns %}
        TxObject."{{pkCol.name}}" = TxLogic."{{pkCol.name}}"
        {%- if not loop.last %}  AND  {% endif %}
                {%- endfor -%}
            {%- endif -%}
        {%- endfor %}

    WHEN NOT MATCHED THEN
        INSERT (
        {%- for col in columns %}
            "{{ col.name }}"{%- if not loop.last -%}, {%- endif %}
        {%- endfor -%}
        )
        VALUES (
        {%- for col in columns %}
            TxLogic."{{ col.name }}" {%- if not loop.last -%}, {%- endif %}
        {%- endfor -%}
        )

    WHEN MATCHED THEN
        UPDATE SET
        {%- for col in columns %}
            TxObject."{{ col.name }}" = TxLogic."{{ col.name }}"{%- if not loop.last -%}, {%- endif %}
        {%- endfor -%}
    ;
    {%- endif %}
  isDefault: true
- id: d49262ec-7dbe-4818-99d8-483ac56ef34c
  value: "\r\n  name: Dimension\r\n\r\n  physicalName: 'tmp_${parentPhysicalName}'\r\n\r\n  logicalName: '${parentLogicalName} dimension'\r\n\r\n  color: 'Purple'                                                # Color of object on diagram (string, green | blue | red | SqlDBM  colors, optional)\r\n\r\n  inheritIdentifiersAs: pk                                    # Inherit primary key columns from parent table(s) as PK or non-PK attributes (string, pk | non-pk | none, default non-pk)\r\n  inheritAttributes: true                                     # Inherit non-pk columns from parent table(s) (boolean, default true)\r\n\r\n  inheritColumnSet:                                           # Inherit columnSet columns from parent table(s) (AK | BK | DELTA | FK | custom string)\r\n  - BK \r\n  - DELTA\r\n  - AK\r\n  - custom\r\n\r\n  primaryColumns:\r\n  - name: 'pk_load_date'                                    # Column name  (string, required)\r\n    logicalName: 'load date'                                # Logical name of the column (string, optional)\r\n    dataType: date                                          # Column data type  (string, required)\r\n    comment: 'load date'                                    # Comment or description  (string, optional)\r\n    nullable: false                                         # Set not null constraint (boolean, default false)\r\n    unique: false\r\n    default: 'current_date()'\r\n    position: first\r\n    logic: 'current_date()'\r\n\r\n  defaultColumns:\r\n  - name: 'load_date'\r\n    logicalName: 'load date'\r\n    dataType: date\r\n    comment: 'load date'\r\n    nullable: false\r\n    unique: false\r\n    default: 'current_date()'\r\n    position: last\r\n    logic: 'current_date()'\r\n\r\n  nodeSettings:\r\n  - groupName: 'System UI Items'\r\n    groupDesc: 'System UI Items'\r\n    isEnabled: true\r\n\r\n    items:\r\n    - itemType: materialization\r\n      default: 'table'\r\n      options:\r\n      - 'table'\r\n      - 'view'\r\n      isRequired: true\r\n      isEnabled: true\r\n\r\n    - itemType: toggleButton\r\n      itemDesc: Truncate before\r\n      itemName: truncateBefore\r\n      default: false\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Pre Create SQL\r\n      itemName: preCreate\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Post Create SQL\r\n      itemName: postCreate\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Pre Run SQL\r\n      itemName: preRun\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Post Run SQL\r\n      itemName: postRun\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n  - groupName: 'Column settings'\r\n    groupDesc: 'Column settings'\r\n    isEnabled: true\r\n\r\n    items:\r\n    - itemType: columnSet\r\n      itemName: PK                                                # PK | AK | BK | DELTA | FK | custom string\r\n      itemDesc: 'Primary key'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemName: AK                                                # PK | AK | BK | DELTA | FK | custom string\r\n      itemDesc: 'Alternate key'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemName: BK                                               # PK | AK | BK | DELTA | FK | custom string\r\n      itemDesc: 'Business key'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemName: DELTA\r\n      itemDesc: 'Change tracking for type.2 SCD'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n  - groupName: 'User UI Items'\r\n    groupDesc: 'Optional user configured items'\r\n    isEnabled: true\r\n\r\n    items:\r\n    - itemType: toggleButton\r\n      itemDesc: 'My Button'\r\n      itemName: my_button\r\n      default: true\r\n      isEnabled: true\r\n\r\n    - itemType: dropdownSelector\r\n      itemDesc: 'My dropdown selector'\r\n      itemName: my_dropdown\r\n      default: 'option 1'\r\n      options:\r\n      - 'option 1'\r\n      - 'option 2'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemDesc: 'My column selector'\r\n      itemName: my_columnSelector\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: multiSelector\r\n      itemDesc: 'My multi selector'\r\n      itemName: my_multi_selector\r\n      options:\r\n      - 'option 1'\r\n      - 'option 2'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: textArea\r\n      itemDesc: 'My Text Area'\r\n      itemName: my_textArea\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: textLine\r\n      itemDesc: 'My text line'\r\n      itemName: my_textline\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: toggleButton\r\n      itemDesc: 'Rely on constraints'\r\n      itemName: rely_button\r\n      default: true\r\n      isEnabled: true"
  name: Dimension
  color: '#8E44AD'
  createScript: >
    {%- if materialization == 'table' %}

    CREATE OR REPLACE TABLE {{ location.databaseName }}.{{ location.schemaName
    }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}" {{ col.dataType }}
            {%- if not col.allowNulls %} NOT NULL
                {%- if col.defaultValue | length > 0 %} DEFAULT {{ col.defaultValue }}{% endif %}
            {%- endif %}
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor -%}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'PK' -%}
            , CONSTRAINT  {{ colSet.setName }} PRIMARY KEY (
                {%- for pkCol in colSet.columns -%}
                    "{{pkCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'AK' -%}
            , CONSTRAINT  {{ colSet.setName }} UNIQUE (
                {%- for akCol in colSet.columns -%}
                    "{{akCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
    )

    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    ;


    {%- elif materialization == 'view' %}

    CREATE OR REPLACE VIEW {{ location.mapping }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}"
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor %}
    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    )

    AS

    {{logic}}

    ;

    {%- endif %}
  runScript: |
    {% if materialization == 'table' %}
    INSERT INTO {{ location.mapping }}.{{name}}
    (
        {%- for col in columns %}
        "{{ col.name }}"
        {%- if not loop.last %}, {% endif %}
        {%- endfor %}
    )
    {{ logic }};
    {%- endif %}
  isDefault: false
- id: 868ce611-8c34-40b7-8e89-5a3190b1e2c8
  value: "\r\n  name: Fact\r\n\r\n  physicalName: 'tmp_${parentPhysicalName}'\r\n\r\n  logicalName: '${parentLogicalName} dimension'\r\n\r\n  color: 'blue'                                                # Color of object on diagram (string, green | blue | red | SqlDBM  colors, optional)\r\n\r\n  inheritIdentifiersAs: pk                                    # Inherit primary key columns from parent table(s) as PK or non-PK attributes (string, pk | non-pk | none, default non-pk)\r\n  inheritAttributes: true                                     # Inherit non-pk columns from parent table(s) (boolean, default true)\r\n\r\n  inheritColumnSet:                                           # Inherit columnSet columns from parent table(s) (AK | BK | DELTA | FK | custom string)\r\n  - BK \r\n  - DELTA\r\n  - AK\r\n  - custom\r\n\r\n  primaryColumns:\r\n  - name: 'pk_load_date'                                    # Column name  (string, required)\r\n    logicalName: 'load date'                                # Logical name of the column (string, optional)\r\n    dataType: date                                          # Column data type  (string, required)\r\n    comment: 'load date'                                    # Comment or description  (string, optional)\r\n    nullable: false                                         # Set not null constraint (boolean, default false)\r\n    unique: false\r\n    default: 'current_date()'\r\n    position: first\r\n    logic: 'current_date()'\r\n\r\n  defaultColumns:\r\n  - name: 'load_date'\r\n    logicalName: 'load date'\r\n    dataType: date\r\n    comment: 'load date'\r\n    nullable: false\r\n    unique: false\r\n    default: 'current_date()'\r\n    position: last\r\n    logic: 'current_date()'\r\n\r\n  nodeSettings:\r\n  - groupName: 'System UI Items'\r\n    groupDesc: 'System UI Items'\r\n    isEnabled: true\r\n\r\n    items:\r\n    - itemType: materialization\r\n      default: 'table'\r\n      options:\r\n      - 'table'\r\n      - 'view'\r\n      isRequired: true\r\n      isEnabled: true\r\n\r\n    - itemType: toggleButton\r\n      itemDesc: Truncate before\r\n      itemName: truncateBefore\r\n      default: false\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Pre Create SQL\r\n      itemName: preCreate\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Post Create SQL\r\n      itemName: postCreate\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Pre Run SQL\r\n      itemName: preRun\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n    - itemType: prePostSql\r\n      itemDesc: Post Run SQL\r\n      itemName: postRun\r\n      default: ''                                                 # Some default SQL text (string, optional)\r\n      isRequired: false\r\n      isEnabled: true\r\n      isValidated: false\r\n\r\n  - groupName: 'Column settings'\r\n    groupDesc: 'Column settings'\r\n    isEnabled: true\r\n\r\n    items:\r\n    - itemType: columnSet\r\n      itemName: PK                                                # PK | AK | BK | DELTA | FK | custom string\r\n      itemDesc: 'Primary key'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemName: AK                                                # PK | AK | BK | DELTA | FK | custom string\r\n      itemDesc: 'Alternate key'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemName: BK                                               # PK | AK | BK | DELTA | FK | custom string\r\n      itemDesc: 'Business key'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemName: DELTA\r\n      itemDesc: 'Change tracking for type.2 SCD'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n  - groupName: 'User UI Items'\r\n    groupDesc: 'Optional user configured items'\r\n    isEnabled: true\r\n\r\n    items:\r\n    - itemType: toggleButton\r\n      itemDesc: 'My Button'\r\n      itemName: my_button\r\n      default: true\r\n      isEnabled: true\r\n\r\n    - itemType: dropdownSelector\r\n      itemDesc: 'My dropdown selector'\r\n      itemName: my_dropdown\r\n      default: 'option 1'\r\n      options:\r\n      - 'option 1'\r\n      - 'option 2'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: columnSet\r\n      itemDesc: 'My column selector'\r\n      itemName: my_columnSelector\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: multiSelector\r\n      itemDesc: 'My multi selector'\r\n      itemName: my_multi_selector\r\n      options:\r\n      - 'option 1'\r\n      - 'option 2'\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: textArea\r\n      itemDesc: 'My Text Area'\r\n      itemName: my_textArea\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: textLine\r\n      itemDesc: 'My text line'\r\n      itemName: my_textline\r\n      isRequired: false\r\n      isEnabled: true\r\n\r\n    - itemType: toggleButton\r\n      itemDesc: 'Rely on constraints'\r\n      itemName: rely_button\r\n      default: true\r\n      isEnabled: true"
  name: Fact
  color: '#1C70FF'
  createScript: >
    {%- if materialization == 'table' %}

    CREATE OR REPLACE TABLE {{ location.databaseName }}.{{ location.schemaName
    }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}" {{ col.dataType }}
            {%- if not col.allowNulls %} NOT NULL
                {%- if col.defaultValue | length > 0 %} DEFAULT {{ col.defaultValue }}{% endif %}
            {%- endif %}
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor -%}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'PK' -%}
            , CONSTRAINT  {{ colSet.setName }} PRIMARY KEY (
                {%- for pkCol in colSet.columns -%}
                    "{{pkCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
        {% for colSet in columnSets %}
            {%- if colSet.itemName == 'AK' -%}
            , CONSTRAINT  {{ colSet.setName }} UNIQUE (
                {%- for akCol in colSet.columns -%}
                    "{{akCol.name}}"
                    {%- if not loop.last %}, {% endif -%}
                {%- endfor -%}
                )
                {%- if rely_button %} RELY {% endif -%}
            {%- endif -%}
        {%- endfor %}
    )

    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    ;


    {%- elif materialization == 'view' %}

    CREATE OR REPLACE VIEW {{ location.mapping }}.{{name}}

    (
        {% for col in columns -%}
            "{{ col.name }}"
            {%- if col.description | length > 0 %} COMMENT '{{ col.description }}'{% endif %}
            {%- if not loop.last %}, {% endif %}
        {% endfor %}
    {%- if description | length > 0 %} COMMENT = '{{ description }}'{% endif %}

    )

    AS

    {{logic}}

    ;

    {%- endif %}
  runScript: |
    {% if materialization == 'table' %}
    INSERT INTO {{ location.mapping }}.{{name}}
    (
        {%- for col in columns %}
        "{{ col.name }}"
        {%- if not loop.last %}, {% endif %}
        {%- endfor %}
    )
    {{ logic }};
    {%- endif %}
  isDefault: false
